{
  "comments": [
    {
      "key": {
        "uuid": "bf659307_5095c931",
        "filename": "zuul/ansible/action/template.py",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-04-02T16:40:55Z",
      "side": 1,
      "message": "We may want to set the TMPDIR environment variable to .../work/tmp when we call ansible, just on general principle.  And if we do that, we may not need this hack.",
      "revId": "39a288a255a6f5889306f021d09e794b94fb3907",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_e74685c0",
        "filename": "zuul/ansible/action/template.py",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 4146
      },
      "writtenOn": "2018-04-03T22:10:57Z",
      "side": 1,
      "message": "That makes sense to me particularly since it will isolate the running less trusted ansible process from potentially more trusted writes to the bwrap /tmp dir.",
      "parentUuid": "bf659307_5095c931",
      "revId": "39a288a255a6f5889306f021d09e794b94fb3907",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_5215a647",
        "filename": "zuul/ansible/action/template.py",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 16068
      },
      "writtenOn": "2018-04-04T06:51:49Z",
      "side": 1,
      "message": "I did that in PS2 but I thought there were problems with tox-remote tests (which was not reproducible locally) and ansible 2.4. But maybe I got dependencies wrong during that test. I\u0027ll retest as I also prefer the env variable solution.\n\nFurther we found out that win_template also suffers from this issue and the env variable solution should hopefully fix any of these problems.",
      "parentUuid": "bf659307_e74685c0",
      "revId": "39a288a255a6f5889306f021d09e794b94fb3907",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_b8574326",
        "filename": "zuul/ansible/action/template.py",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 16068
      },
      "writtenOn": "2018-04-04T07:58:26Z",
      "side": 1,
      "message": "Ok, I found out that using the TMPDIR variable has no effect in tox-remote but TMP does work. So switched back to the env variable approach using TMP instead of TMPDIR.",
      "parentUuid": "bf659307_5215a647",
      "revId": "39a288a255a6f5889306f021d09e794b94fb3907",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_a5b63b3d",
        "filename": "zuul/ansible/action/template.py",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 16068
      },
      "writtenOn": "2018-04-04T08:44:33Z",
      "side": 1,
      "message": "I did further testing with a followup change and found out that the TMPDIR variable doesn\u0027t make it into the ansible process but TMP does. I don\u0027t know why as TMPDIR worked locally. So I suggest to just use TMP which works.\n\nhttp://paste.openstack.org/show/718353/",
      "parentUuid": "bf659307_b8574326",
      "revId": "39a288a255a6f5889306f021d09e794b94fb3907",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}