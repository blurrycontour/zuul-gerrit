{
  "comments": [
    {
      "key": {
        "uuid": "5fc1f717_6ab9c5e7",
        "filename": "doc/source/developer/specs/circular-dependencies.rst",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-03-19T18:20:15Z",
      "side": 1,
      "message": "Zuul could automatically push a revert which would be a regular push, not a force-push.  I do agree that force-pushes are problematic and we should avoid them.",
      "revId": "eb40c64040800f2db7eb9a7c5167e17c3085c75f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7faddb67_0ec3e139",
        "filename": "doc/source/developer/specs/circular-dependencies.rst",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 27582
      },
      "writtenOn": "2019-07-16T07:51:46Z",
      "side": 1,
      "message": "I think even pushing a revert might make the situation worse than just properly reporting what succeeded and what failed and fall back to human intervention for resolving the inconsistent state.",
      "parentUuid": "5fc1f717_6ab9c5e7",
      "revId": "eb40c64040800f2db7eb9a7c5167e17c3085c75f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_0ace0183",
        "filename": "doc/source/developer/specs/circular-dependencies.rst",
        "patchSetId": 3
      },
      "lineNbr": 172,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-03-19T18:20:15Z",
      "side": 1,
      "message": "In our previous discussions on the topic, we generally considered \"Zuul push\", ie, having Zuul push the merge rather than asking Gerrit or GitHub to do it, to be a pre-requisite for this, because we thought that errors (for example, due to merge or permissions discrepancies between Zuul and the code review system) were likely and error recovery (by reverting previously merged patches) was important.  I still think that\u0027s the best way to handle it, so I think we should look into that.\n\nIn both Gerrit and GitHub\u0027s case, if Zuul pushes a commit for a change/PR, the change/PR will be closed.  And it should be a simple matter to add a \"push\" command to the merger.",
      "revId": "eb40c64040800f2db7eb9a7c5167e17c3085c75f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7faddb67_2ed57de5",
        "filename": "doc/source/developer/specs/circular-dependencies.rst",
        "patchSetId": 3
      },
      "lineNbr": 172,
      "author": {
        "id": 27582
      },
      "writtenOn": "2019-07-16T07:51:46Z",
      "side": 1,
      "message": "Agree, that this could be added. However, IIRC with Github Apps it is not possible to allow pushes to a protected branch. So this would be mainly useful for Gerrit.",
      "parentUuid": "5fc1f717_0ace0183",
      "revId": "eb40c64040800f2db7eb9a7c5167e17c3085c75f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7faddb67_a20bbc21",
        "filename": "doc/source/developer/specs/circular-dependencies.rst",
        "patchSetId": 3
      },
      "lineNbr": 172,
      "author": {
        "id": 2
      },
      "writtenOn": "2019-07-16T11:20:55Z",
      "side": 1,
      "message": "Yeah - which is super sad making.\n\nPerhaps when we look at \"Zuul push\" we could consider allowing a \"push\" account to be configured in the github driver that would be a regular account for Zuul to use to push things, separate from the App. (it\u0027s an ugly workaround, but such is life)",
      "parentUuid": "7faddb67_2ed57de5",
      "revId": "eb40c64040800f2db7eb9a7c5167e17c3085c75f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7faddb67_026bb084",
        "filename": "doc/source/developer/specs/circular-dependencies.rst",
        "patchSetId": 3
      },
      "lineNbr": 172,
      "author": {
        "id": 16068
      },
      "writtenOn": "2019-07-16T11:41:07Z",
      "side": 1,
      "message": "Using a push account is not really feasible from my role as an operator of a large scale multi tenant setup.\n\nHowever where we support it (probably all but Github) we should be able to use it in order to at least rule out algorithmic differences between different git versions/implementations.\n\nBut I\u0027m not sure if we can just default to push in Gerrit or make that configurable separately per project (I guess in Gerrit we might need different permissions for push than submit).\n\nThat said I think we should make this as best effort as possible but don\u0027t try to \u0027repair\u0027 things if they still go wrong. And we should make this very clean in the docs that this is a tradeof that has to be made when allowing circular dependencies.",
      "parentUuid": "7faddb67_a20bbc21",
      "revId": "eb40c64040800f2db7eb9a7c5167e17c3085c75f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}