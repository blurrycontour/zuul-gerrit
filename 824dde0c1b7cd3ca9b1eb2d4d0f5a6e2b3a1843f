{
  "comments": [
    {
      "key": {
        "uuid": "9abb7d3a_86302e58",
        "filename": "zuul/lib/commandsocket.py",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 2903
      },
      "writtenOn": "2016-05-28T10:16:37Z",
      "side": 1,
      "message": "This doesn\u0027t seem to be actually used to stop the listener, the call to .stop() should break the listener loop instead of just plopping something into the queue, unless I am mis-reading the code.",
      "revId": "824dde0c1b7cd3ca9b1eb2d4d0f5a6e2b3a1843f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9abb7d3a_664a6ac7",
        "filename": "zuul/lib/commandsocket.py",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 2903
      },
      "writtenOn": "2016-05-28T10:18:56Z",
      "side": 1,
      "message": "related, I don\u0027t see anything specifically looking for \u0027_stop\u0027 from the queue.",
      "parentUuid": "9abb7d3a_86302e58",
      "revId": "824dde0c1b7cd3ca9b1eb2d4d0f5a6e2b3a1843f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9abb7d3a_4ec0b42a",
        "filename": "zuul/lib/commandsocket.py",
        "patchSetId": 2
      },
      "lineNbr": 42,
      "author": {
        "id": 1
      },
      "writtenOn": "2016-05-31T15:52:24Z",
      "side": 1,
      "message": "Here\u0027s the thinking around this:\n\n1) The listener thread is a daemon, so it doesn\u0027t actually need to stop.  It could, but in order to do so, it will need to actually make a connection to the socket in order to escape the accept() call below.\n2) This method is actually so that whoever is calling get() on the queue gets woken up -- they will recieve a \u0027_stop\u0027 event, which they don\u0027t need to handle, but they then have an opportunity to check whether they should still be running.  (This could also perhaps be improved by having this class remember that stop() has been called and then refusing further get() invocations.)\n\nThis is clearly not obvious (it even took me a minute to page this stuff back in), so I will write some comments.",
      "revId": "824dde0c1b7cd3ca9b1eb2d4d0f5a6e2b3a1843f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}