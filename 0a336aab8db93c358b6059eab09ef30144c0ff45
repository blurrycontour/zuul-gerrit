{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a6bb5faa_fccf4a24",
        "filename": "zuul/model.py",
        "patchSetId": 11
      },
      "lineNbr": 1671,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-10-28T22:06:58Z",
      "side": 1,
      "message": "See below comment.",
      "revId": "0a336aab8db93c358b6059eab09ef30144c0ff45",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "435b19f9_79ad51be",
        "filename": "zuul/model.py",
        "patchSetId": 11
      },
      "lineNbr": 1671,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-10-28T22:32:05Z",
      "side": 1,
      "message": "Responding here -- unfortunately, in order to create the JobData object in ZK, we need this object to exist first.  So here we need to make the check to decide whether or not we are going to store the data on this object as a dict.  Then in line 1676 we create the object in ZK, then below that we create the actual JobData object which writes that to ZK.",
      "revId": "0a336aab8db93c358b6059eab09ef30144c0ff45",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2fd336ee_47c90fa2",
        "filename": "zuul/model.py",
        "patchSetId": 11
      },
      "lineNbr": 1671,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-10-28T22:40:14Z",
      "side": 1,
      "message": "I see we would have to do something like:\n\n  job_data_vars \u003d {}\n  for k in klass.job_data_attributes:\n    v \u003d kw.pop(k, None)\n    job_data_vars[k] \u003d v\n\n  obj.set(**kw)\n  obj._save(context, create\u003dTrue)\n  \n  update_kw \u003d {}\n  for (k, v) in job_data_vars.items():\n    update_kw[\u0027_\u0027 + k] \u003d obj._makeJobData(context, k, v)\n  if update_kw:\n    obj.updateAttributes(context, **update_kw)\n  return obj",
      "parentUuid": "435b19f9_79ad51be",
      "revId": "0a336aab8db93c358b6059eab09ef30144c0ff45",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b22b9220_3500b8d8",
        "filename": "zuul/model.py",
        "patchSetId": 11
      },
      "lineNbr": 1887,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-10-28T22:06:58Z",
      "side": 1,
      "message": "We appear to do this check twice in some circumstances. When we add to job_data_vars above and here for example. Above can we just call _makeJobData and have it return the correct type for us and cut out a json conversion?",
      "range": {
        "startLine": 1887,
        "startChar": 11,
        "endLine": 1887,
        "endChar": 67
      },
      "revId": "0a336aab8db93c358b6059eab09ef30144c0ff45",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}