{
  "comments": [
    {
      "key": {
        "uuid": "61e45431_49e3f26d",
        "filename": "tests/unit/test_github_driver.py",
        "patchSetId": 7
      },
      "lineNbr": 355,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-04-26T22:55:17Z",
      "side": 1,
      "message": "Does the commitConfigUpdate() above need to run before we release builds to ensure there isn\u0027t a race between timer jobs running and this update happening?",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c783ad9c_72730b58",
        "filename": "tests/unit/test_github_driver.py",
        "patchSetId": 7
      },
      "lineNbr": 355,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-04-27T01:40:14Z",
      "side": 1,
      "message": "This seems to be failing now and isn\u0027t related to the change.  I think we should back it out.",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbe4e183_94fd5911",
        "filename": "zuul/executor/client.py",
        "patchSetId": 7
      },
      "lineNbr": 307,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-04-26T22:55:17Z",
      "side": 1,
      "message": "This method only exists to log the job data at this point. Would it be better to simply pass it? Or remove it altogether?\n\nAs an alternative should we keep the method largely as is? its purpose is to return info back to gearman about build status. We can clean this up when gearman goes away? I think for now it would only make sense for the merge jobs?",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef0a28bc_b332ce05",
        "filename": "zuul/executor/client.py",
        "patchSetId": 7
      },
      "lineNbr": 307,
      "author": {
        "id": 27952
      },
      "writtenOn": "2021-04-27T05:13:49Z",
      "side": 1,
      "message": "IIRC I remove this method in the follow up change, when we switch from Gearman to ZooKeeper for the actual job execution (BuildRequest). In here I just moved all the different parts that deal with build result events into a single place in the scheduler.\n\nI think we should keep it for now, to not cause any issues with gearman.",
      "parentUuid": "cbe4e183_94fd5911",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e91c025f_11a7774a",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1012,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-04-26T22:55:17Z",
      "side": 1,
      "message": "The import above is for TENANT_ROOT not TENANT_EVENT_ROOT.",
      "range": {
        "startLine": 1012,
        "startChar": 51,
        "endLine": 1012,
        "endChar": 56
      },
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3f2eb64_d0e0b373",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1012,
      "author": {
        "id": 27952
      },
      "writtenOn": "2021-04-27T05:13:49Z",
      "side": 1,
      "message": "I did the following import in my version of the change:\n\nfrom zuul.zk.event_queues import TENANT_ROOT as TENANT_EVENT_ROOT\n\nThe main reason was to make the delete part that uses this variable further down a little more understandable. We are not removing the whole tenant there, but just the event queues in ZooKeeper. Maybe we will change the variable name in the event_queues module later on as well, but I didn\u0027t want to do this in here.",
      "parentUuid": "e91c025f_11a7774a",
      "range": {
        "startLine": 1012,
        "startChar": 51,
        "endLine": 1012,
        "endChar": 56
      },
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea0c9e5b_299f1678",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1012,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-04-27T13:46:54Z",
      "side": 1,
      "message": "I\u0027d rather not rename things like that on import without a good reason; it makes grepping difficult or impossible.  We should probably rename it in the original to make it more clear.",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68870a82_948cc368",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1433,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-04-26T22:55:17Z",
      "side": 1,
      "message": "Any concern that a busy tenant could starve the others? Maybe we should consider a breadth first approach? I though I suspect depth first like this is better most of the time.",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf97d4a4_d69c25ca",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1433,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-04-26T23:09:24Z",
      "side": 1,
      "message": "When there are multiple schedulers, we\u0027ll lock for processing at the pipeline level.  So this is probably the way to go to be most efficient then.  And of course, if there is starvation in that case, another scheduler can be added.\n\nAlso, I think since we get the event list at the start of the iterator, we\u0027ll eventually move on to other pipelines and tenants, so a busy tenant could cause other tenants to \u0027pause\u0027 but not completely starve them.",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43e16754_17630d16",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1694,
      "author": {
        "id": 4146
      },
      "writtenOn": "2021-04-26T22:55:17Z",
      "side": 1,
      "message": "Shouldn\u0027t this be subject to the build.job.attempts upper limit of retries too?",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "adebf377_d7551bab",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1694,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-04-26T23:09:24Z",
      "side": 1,
      "message": "I think this is a straight copy from the existing executor client and not a change in logic.\n\nRegardless, I think this is correct -- an executor crashing shouldn\u0027t penalize the job.",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1709825f_86deda34",
        "filename": "zuul/scheduler.py",
        "patchSetId": 7
      },
      "lineNbr": 1694,
      "author": {
        "id": 27952
      },
      "writtenOn": "2021-04-27T05:13:49Z",
      "side": 1,
      "message": "Yes the whole result event handling is just copy/move of the existing parts from different places. I did just a few adaptions to make the parts work together in a single place.",
      "parentUuid": "adebf377_d7551bab",
      "revId": "b44222e3697070e296a8630bb53ded80433a3067",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}