{
  "comments": [
    {
      "key": {
        "uuid": "3fa7e38b_6d162958",
        "filename": "tests/base.py",
        "patchSetId": 4
      },
      "lineNbr": 2170,
      "author": {
        "id": 9311
      },
      "writtenOn": "2019-09-25T14:03:00Z",
      "side": 1,
      "message": "why not using the iterate_timeout procedure?",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_f595fb87",
        "filename": "tests/base.py",
        "patchSetId": 4
      },
      "lineNbr": 2170,
      "author": {
        "id": 16068
      },
      "writtenOn": "2019-09-25T15:13:03Z",
      "side": 1,
      "message": "Because we don\u0027t need a timeout here. The test case explicitly releases this loop by resetting hold_jobs_in_start to False.",
      "parentUuid": "3fa7e38b_6d162958",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_79c0a47d",
        "filename": "tests/base.py",
        "patchSetId": 4
      },
      "lineNbr": 2170,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-10-21T16:34:24Z",
      "side": 1,
      "message": "But if something goes wrong and the test aborts before that happens, this could get stuck here forever.  hold_jobs_in_build uses a Condition which is set in teardown to make sure it gets cleaned up.  We could do the same here, but this isn\u0027t going to be used that much so it\u0027s probably okay to use iterate_timeout.  You can set a long timeout.",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_9f19487b",
        "filename": "zuul/executor/client.py",
        "patchSetId": 4
      },
      "lineNbr": 386,
      "author": {
        "id": 9311
      },
      "writtenOn": "2019-09-25T14:03:00Z",
      "side": 1,
      "message": "Perhaps create a build_worker variable similarly to the job one above so that the rest of the code doesn\u0027t reference a __ private attribute?",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_f53e5bb6",
        "filename": "zuul/executor/client.py",
        "patchSetId": 4
      },
      "lineNbr": 386,
      "author": {
        "id": 16068
      },
      "writtenOn": "2019-09-25T15:13:03Z",
      "side": 1,
      "message": "The exact same variable is also used already by cancelRunningBuild and in some other places which I didn\u0027t want to refactor.",
      "parentUuid": "3fa7e38b_9f19487b",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_f5865bb9",
        "filename": "zuul/executor/client.py",
        "patchSetId": 4
      },
      "lineNbr": 484,
      "author": {
        "id": 9311
      },
      "writtenOn": "2019-09-25T15:38:37Z",
      "side": 1,
      "message": "iirc this is used to indicate the build has started and thus can be aborted. Why not naming this attribute started then? Or add a started property to the build object that check for the __gearman_worker",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_008de5d1",
        "filename": "zuul/executor/client.py",
        "patchSetId": 4
      },
      "lineNbr": 484,
      "author": {
        "id": 16068
      },
      "writtenOn": "2019-09-26T12:20:47Z",
      "side": 1,
      "message": "This attribute must be gearman_worker as this is not only used to determine if the build has started but also to which executor stop jobs need to be sent. So gearman_worker really is correct. What we could do however is to remove this variable completely and use build.worker.name directly which contains the same information anyway. (but maybe in a different change as this is an unrelated refactoring?)",
      "parentUuid": "3fa7e38b_f5865bb9",
      "revId": "8df57d47d239b4828dc59cc16d67f4c0a9f158c2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}