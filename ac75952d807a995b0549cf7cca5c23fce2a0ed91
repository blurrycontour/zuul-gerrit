{
  "comments": [
    {
      "key": {
        "uuid": "7f231b9d_03845f0b",
        "filename": "zuul/ansible/callback/zuul_stream.py",
        "patchSetId": 1
      },
      "lineNbr": 146,
      "author": {
        "id": 6589
      },
      "writtenOn": "2017-06-12T19:17:53Z",
      "side": 1,
      "message": "Not related to your change per se, but what happens for \u0027shell\u0027 actions?",
      "revId": "ac75952d807a995b0549cf7cca5c23fce2a0ed91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f231b9d_beff0100",
        "filename": "zuul/ansible/callback/zuul_stream.py",
        "patchSetId": 1
      },
      "lineNbr": 146,
      "author": {
        "id": 2
      },
      "writtenOn": "2017-06-12T21:23:31Z",
      "side": 1,
      "message": "task.action \u003d\u003d \u0027command\u0027 for shell tasks",
      "parentUuid": "7f231b9d_03845f0b",
      "revId": "ac75952d807a995b0549cf7cca5c23fce2a0ed91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f231b9d_3eaf71e4",
        "filename": "zuul/ansible/callback/zuul_stream.py",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 2
      },
      "writtenOn": "2017-06-12T21:23:31Z",
      "side": 1,
      "message": "I think the problem is actually that this is too simplistic. If you look at _get_hostname, it does:\n\n        delegated_vars \u003d result._result.get(\u0027_ansible_delegated_vars\u0027, None)\n        if delegated_vars:\n            return \"{host} -\u003e {delegated_host}\".format(\n                host\u003dresult._host.get_name(),\n                delegated_host\u003ddelegated_vars[\u0027ansible_host\u0027])\n        else:\n            return result._host.get_name()\n\nSo, we need to connect to delegated_host instead of host.\n\nIf we don\u0027t connect to anything, we\u0027ll lose logging of the output of delegated tasks.",
      "revId": "ac75952d807a995b0549cf7cca5c23fce2a0ed91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f231b9d_12e5c4a8",
        "filename": "zuul/ansible/callback/zuul_stream.py",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 9311
      },
      "writtenOn": "2017-06-13T01:01:45Z",
      "side": 1,
      "message": "I\u0027ll look into that.",
      "parentUuid": "7f231b9d_3eaf71e4",
      "revId": "ac75952d807a995b0549cf7cca5c23fce2a0ed91",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}