- nodeset:
    name: zuul-functional
    nodes:
      - name: controller
        label: ubuntu-xenial
      - name: node1
        label: ubuntu-xenial
      - name: node2
        label: ubuntu-xenial
    groups:
      - name: node
        nodes:
          - node1
          - node2

- job:
    name: zuul-stream-functional
    parent: multinode
    nodeset: zuul-functional
    pre-run: playbooks/zuul-stream/pre
    run: playbooks/zuul-stream/functional
    post-run:
      - playbooks/zuul-stream/post
      - playbooks/zuul-stream/post-ara
    required-projects:
      - openstack/ara
    files:
      - "zuul/ansible/callback/.*"
      - "playbooks/zuul-stream/.*"

- job:
    name: zuul-migrate
    run: playbooks/zuul-migrate/run

- project:
    name: openstack-infra/zuul
    check:
      jobs:
        - zuul-migrate
