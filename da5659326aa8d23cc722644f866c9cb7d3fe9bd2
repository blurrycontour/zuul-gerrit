{
  "comments": [
    {
      "key": {
        "uuid": "5fc1f717_fa5102db",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 133,
      "author": {
        "id": 7186
      },
      "writtenOn": "2019-04-01T17:44:50Z",
      "side": 1,
      "message": "We should keep support for the \u0027*\u0027 wildcard, allowing operators to perform admin actions from the web UI as well. WDYT?",
      "range": {
        "startLine": 133,
        "startChar": 7,
        "endLine": 133,
        "endChar": 38
      },
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_6d1c56c1",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 133,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-04-02T21:21:48Z",
      "side": 1,
      "message": "Sounds a little risky (people might be tempted to issue them out of convenience), but I\u0027m not opposed.",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_7facf79e",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 133,
      "author": {
        "id": 7186
      },
      "writtenOn": "2019-04-03T08:17:18Z",
      "side": 1,
      "message": "We could also state that \"global\" administration tasks should be performed with the CLI exclusively.",
      "parentUuid": "5fc1f717_6d1c56c1",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_0d77d20a",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 167,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-04-02T21:21:48Z",
      "side": 1,
      "message": "If we\u0027re going to keep the authorizations config, how about we just combine it with the main tenant config.  So main.yaml would look like:\n\n- admin-rule:\n  name: foo\n\n- admin-rule:\n  name: bar\n\n- tenant:\n  name: foo\n  admin-rules:\n    - foo\n\n(And regardless, I suggest the change from \"rule\" to \"admin-rule\" just to make the link between the different data structures more obvious).",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_1f3db32b",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 167,
      "author": {
        "id": 7186
      },
      "writtenOn": "2019-04-03T08:17:18Z",
      "side": 1,
      "message": "I made this choice mostly because it was easier for me to implement :)\n\nBut if I remember correctly the zuul-web service doesn\u0027t load the main.yaml anyway (all the info it needs from it gets fetched via RPC). I guess we could change that but since the service doesn\u0027t need to be fully aware of the tenant config, it seems a bit overkill. Correct me if I\u0027m wrong though.",
      "parentUuid": "5fc1f717_0d77d20a",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_6dbd1fd6",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 167,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-04-03T20:10:20Z",
      "side": 1,
      "message": "I suspect that in the long run, with scale-out schedulers, we would have the entire tenant config, including the authorizations, in ZK, and the scheduler(s) will be responsible for putting it there, and zuul-web can read it out of there.  Given that, I would like to avoid introducing a new config file which will probably be removed; this will make things easier on users.\n\nThe connection of the rules to the tenant are already in the tenant config anyway, so I don\u0027t think it will be much more complex.  As for the rules themselves, we can probably have the scheduler supply them to zuul-web over RPC (along with the tenant list).",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_da0766c9",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 197,
      "author": {
        "id": 7186
      },
      "writtenOn": "2019-04-01T17:44:50Z",
      "side": 1,
      "message": "to clarify: the rule is matched if *any* condition in the list matches the Authentication Token\u0027s claims",
      "range": {
        "startLine": 196,
        "startChar": 17,
        "endLine": 197,
        "endChar": 20
      },
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_2d7c0eea",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 202,
      "author": {
        "id": 1
      },
      "writtenOn": "2019-04-02T21:21:48Z",
      "side": 1,
      "message": "Are you sure we can\u0027t infer this?  Given the examples, testing for equality if the claim is a string and membership if it\u0027s a list would work... (I see a comment from you below on this -- maybe I just need to see an example of where it would be too permissive if we didn\u0027t know the type.)",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_ff70e742",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 202,
      "author": {
        "id": 7186
      },
      "writtenOn": "2019-04-03T08:17:18Z",
      "side": 1,
      "message": "I see it as an extra step to make sure the token is valid, but this could be dropped to simplify rule writing.",
      "parentUuid": "5fc1f717_2d7c0eea",
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fc1f717_ff6f8725",
        "filename": "doc/source/developer/specs/tenant-scoped-admin-web-API.rst",
        "patchSetId": 13
      },
      "lineNbr": 375,
      "author": {
        "id": 7186
      },
      "writtenOn": "2019-04-03T08:17:18Z",
      "side": 1,
      "message": "renamed as /api/user/authorizations for clarity",
      "range": {
        "startLine": 375,
        "startChar": 4,
        "endLine": 375,
        "endChar": 21
      },
      "revId": "da5659326aa8d23cc722644f866c9cb7d3fe9bd2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}