{
  "comments": [
    {
      "key": {
        "uuid": "b8dfc001_d29eedcd",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 7118
      },
      "writtenOn": "2021-01-27T02:01:51Z",
      "side": 1,
      "message": "I may be missing something, but I can not see anywhere that \"formatters\" supports a \"class\" field?\n\nhttps://docs.python.org/3/library/logging.config.html#logging-config-dictschema\n\n The dictionary passed to dictConfig() must contain the following keys:\n ...\n formatters - the corresponding value will be a dict in which each key is a formatter id and each value is a dict describing how to configure the corresponding Formatter instance.\n\n The configuring dict is searched for keys format and datefmt (with defaults of None) and these are used to construct a Formatter instance.\n\nI\u0027m not really convinced this works ... and I\u0027m not sure what logs to look at to confirm that?  I don\u0027t think any of the successful tox runs actually keep the zuul logs to inspect?",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "766ecadb_a56a7f27",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 29671
      },
      "writtenOn": "2021-01-27T07:53:21Z",
      "side": 1,
      "message": "Shouldn\u0027t this affect the quickstart logs? I\u0027m pretty sure this or something similar works however since we\u0027ve done this to get json logs in the past.",
      "parentUuid": "b8dfc001_d29eedcd",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69974cb2_4335df99",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 7118
      },
      "writtenOn": "2021-01-27T08:13:04Z",
      "side": 1,
      "message": "Good point; that does have the most complete set of logs of the jobs probably.  I went through\n\nhttps://storage.bhs.cloud.ovh.net/v1/AUTH_dcaab5e32b234d56b626f72581e3644c/zuul_opendev_logs_b74/772602/1/check/zuul-quick-start/b748a57/container_logs/\n\nand didn\u0027t see any instances of this, however.\n\nalthough the launcher log does have some examples of exceptions that would also be nice to have covered too ðŸ˜Š\n\nhttps://storage.bhs.cloud.ovh.net/v1/AUTH_dcaab5e32b234d56b626f72581e3644c/zuul_opendev_logs_b74/772602/1/check/zuul-quick-start/b748a57/container_logs/launcher.log",
      "parentUuid": "766ecadb_a56a7f27",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bcf25f4_7af323b2",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-01-27T14:43:58Z",
      "side": 1,
      "message": "It works.  I tested this before submitting it.  If you want, we could create a unit test for it.\n\nThis is why class works: https://github.com/python/cpython/blob/master/Lib/logging/config.py#L670\n\nIt mirrors the stanza below in handlers.  But I agree, it\u0027s undocumented.  It\u0027s hard to say whether that\u0027s an oversign or intentional.  We may be able to use this approach instead which is fully documented but more verbose: https://docs.python.org/3/library/logging.config.html#user-defined-objects",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba3ed49f_2c0ed69f",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 31905
      },
      "writtenOn": "2021-01-27T16:36:07Z",
      "side": 1,
      "message": "https://docs.python.org/3/library/logging.config.html#logging-config-dictschema\nat the bottom of the page: \"class\u003dlogging.Formatter\"\n\ntested by https://review.opendev.org/c/zuul/zuul/+/772697\nscheduler log: https://zuul.opendev.org/t/zuul/build/d3d6e6c24c814c6086e803556225f62f/log/container_logs/scheduler.log",
      "parentUuid": "69974cb2_4335df99",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0544a116_5f3cd69b",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-01-27T21:40:11Z",
      "side": 1,
      "message": "That makes it seem more like an oversight in the docs to me.  My guess is the intent is to use \u0027class\u0027 if it subclasses the built-in formatter class (as we do) and \u0027()\u0027 if the formatter takes entirely different args.",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e43fda87_c13e72d5",
        "filename": "zuul/ansible/logconfig.py",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 7118
      },
      "writtenOn": "2021-01-28T00:44:47Z",
      "side": 1,
      "message": "Thanks; so I wasn\u0027t *totally* crazy not having seen this before ðŸ˜Š\n\nI\u0027ve created a pull request to fix the documentation @ https://github.com/python/cpython/pull/24358",
      "parentUuid": "0544a116_5f3cd69b",
      "revId": "c9105f81cb2be6400b7d4dc786146f77c86f567f",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}