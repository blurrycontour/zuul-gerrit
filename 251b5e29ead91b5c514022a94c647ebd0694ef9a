{
  "comments": [
    {
      "key": {
        "uuid": "bf659307_8cb7693b",
        "filename": "tests/unit/test_streaming.py",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 4146
      },
      "writtenOn": "2018-04-06T16:02:41Z",
      "side": 1,
      "message": "Is it possible that by stopping the job above the ws_client_thread will read fewer than the full 1025 bytes? Maybe before allowing the job to complete above we can check the size of the buffer read by ws_client_thread to ensure it is at least 1025 bytes or 1024 characters?\n\nWithout this I worry the assert on line 325 could be racey and potentially lead to a flaky test.",
      "revId": "251b5e29ead91b5c514022a94c647ebd0694ef9a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_cfc47395",
        "filename": "tests/unit/test_streaming.py",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 4146
      },
      "writtenOn": "2018-04-06T16:42:15Z",
      "side": 1,
      "message": "Speaking to Shrews on IRC this would only be the case if the job was forcefully stopped. But since the job is allowed to gracefully end the entirety of its log file should make it through the entirety of the streaming machinery.",
      "parentUuid": "bf659307_8cb7693b",
      "revId": "251b5e29ead91b5c514022a94c647ebd0694ef9a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_0feed9b3",
        "filename": "zuul/web/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 7118
      },
      "writtenOn": "2018-04-08T22:40:16Z",
      "side": 1,
      "message": "I\u0027m not that familiar with the details of this, especially undernath async i/o and websockets, etc.  but ...\n\n\"Decodes object (taking the current state of the decoder into account) and returns the resulting decoded object. If this is the last call to decode() final must be true (the default is false). If final is true the decoder must decode the input completely and must flush all buffers.\"\n\nThus at this point, could the decoder object possibly have data buffered inside it that has not been flushed?  I feel like here you want to do one more decode with final\u003dTrue and then send anything on?",
      "revId": "251b5e29ead91b5c514022a94c647ebd0694ef9a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}