{
  "comments": [
    {
      "key": {
        "uuid": "5f7c97a3_32019405",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 377,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-06-07T21:33:24Z",
      "side": 1,
      "message": "Why don\u0027t we convert this back to the string constant we use in yaml rather that the numeric constant, that way we\u0027re not leaking internal zuul constants which have no meaning to end users.  Or, instead, we could just change the values of the constants to strings rather than numbers, then this line can stay as-is.",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_231624a9",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 377,
      "author": {
        "id": 9311
      },
      "writtenOn": "2018-06-08T02:48:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5f7c97a3_32019405",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_d2070018",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 383,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-06-07T21:33:24Z",
      "side": 1,
      "message": "Why the subscript here?  That means you\u0027d only get one variant.",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_0378c8f5",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 383,
      "author": {
        "id": 9311
      },
      "writtenOn": "2018-06-08T02:48:04Z",
      "side": 1,
      "message": "The intent of this project endpoint is to list jobs attached to the project so that we could get a view of all the projects using a specific job. I think it\u0027s fine to not be exhaustive here and rather let the user/javascript query the job endpoint to get the full details.",
      "parentUuid": "5f7c97a3_d2070018",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_bcdc5ce1",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 383,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-06-11T19:18:07Z",
      "side": 1,
      "message": "I think you need to return all of the variants here.  Querying the jobs endpoint will only get you the global job variants, not the variants defined on this project.  You need both to understand the configuration.  Since this is fundamental to the API, I think we need to get it right now.  I don\u0027t think it\u0027s going to be easy to switch from a dict to a list-of-dicts later.",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_f20a3c1e",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 392,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-06-07T21:33:24Z",
      "side": 1,
      "message": "Why not use job.toDict() here?  The full job configuration language is available in a project-pipeline job config, and this is the only place that would be exposed in the web api.  Omitting it could be very misleading to someone trying to understand why a job is behaving a certain way on a project.",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_836b781d",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 392,
      "author": {
        "id": 9311
      },
      "writtenOn": "2018-06-08T02:48:04Z",
      "side": 1,
      "message": "I would prefer the interface to use the job endpoint to get more detail if needed.",
      "parentUuid": "5f7c97a3_f20a3c1e",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_5cef4886",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 392,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-06-11T19:18:07Z",
      "side": 1,
      "message": "As I mentioned in the reply above, there is no other way to get this data.  The jobs endpoint will not provide it, so I think we need to do this here.",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_1aec6fb9",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 392,
      "author": {
        "id": 9311
      },
      "writtenOn": "2018-06-11T22:24:56Z",
      "side": 1,
      "message": "I would really prefer to keep this interface simple to consume. But I agree we better get this right. I think we have 3 options here:\n\nA: add a \"variants_list\" attribute to the pipeline_job dictionary to store the variant description field.\nB: add a \"jobs_list\" attribute to the pipeline_job dictionary to store each job.toDict() content.\nC: make pipeline_jobs a list of list of job.toDict() content.\n\nI guess C makes the most sense, but if possible I would go with A or B.\n\nOn a side note, it seems like graphQL would really help us simplify zuul-web REST complexity and I would like to start a PoC in zuul in parallel of the one the API working group is doing with Neutron.",
      "parentUuid": "5f7c97a3_5cef4886",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7c97a3_0bd3bf02",
        "filename": "zuul/rpclistener.py",
        "patchSetId": 15
      },
      "lineNbr": 392,
      "author": {
        "id": 1
      },
      "writtenOn": "2018-06-12T00:44:54Z",
      "side": 1,
      "message": "I think the best argument for C is that is the way the config files are written in the first place, so a user who understands those can easily understand the API output.",
      "revId": "1c665870885bd4e5c896486c61e41ec1bae51b1a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}