{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3e5a98a3_0eace518",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1630,
      "author": {
        "id": 27582
      },
      "writtenOn": "2023-09-06T09:57:52Z",
      "side": 1,
      "message": "Isn\u0027t this doing a lot of the same things that we already do in `getMissingNeededChanges()`? Maybe we could pass a dict to the above call in line 1625 for the `dependency_graph` argument and re-use that afterwards to detect if the bundle has changed.",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c4a0f05_e4bee9a6",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1630,
      "author": {
        "id": 1
      },
      "writtenOn": "2023-09-06T13:40:13Z",
      "side": 1,
      "message": "Yes, and I originally started writing it that way, but getMessingNeededChanges short circuits if a change is merged, so the logic is different.  Additionally, it\u0027s very verbose.  So we\u0027d need to call it twice anyway for the logic change, and half the calls in it would need to be wrapped by a conditional saying which mode to run it in.\n\nI\u0027m open to suggestions though if someone sees a way through that.  It would be my preference as well.",
      "parentUuid": "3e5a98a3_0eace518",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b56c13df_1b87d17c",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1638,
      "author": {
        "id": 27582
      },
      "writtenOn": "2023-09-08T13:37:25Z",
      "side": 1,
      "message": "Should we maybe log what exactly has changed?",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30b7aa8d_e35aaa59",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1638,
      "author": {
        "id": 1
      },
      "writtenOn": "2023-09-11T22:01:38Z",
      "side": 1,
      "message": "Good idea.  I\u0027ll have it log old and new bundle items..",
      "parentUuid": "b56c13df_1b87d17c",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b480519c_4f41a813",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1642,
      "author": {
        "id": 27582
      },
      "writtenOn": "2023-09-08T13:37:25Z",
      "side": 1,
      "message": "Can the bundle here be `None`? Just wondering if it would also make sense to wrap the whole block from line 1631-1649 in a `if item.bundle:`.",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a533df16_0aca169e",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1642,
      "author": {
        "id": 1
      },
      "writtenOn": "2023-09-11T22:01:38Z",
      "side": 1,
      "message": "I doubt it, but I think this is the safest approach.  It could only happen if an item stops being part of a bundle (ie, all other items are removed from the bundle).  I\u0027m pretty sure that would leave us with item.bundle.items \u003d [], but this seems safe as it handles all possible cases, and the logic seems sound to me.\n\nHaving said that, I see the argument for simplicity for the other approach.  I\u0027ll make a followup change and we can see if we like it better.",
      "parentUuid": "b480519c_4f41a813",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa2c0862_5f9137b5",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1761,
      "author": {
        "id": 27582
      },
      "writtenOn": "2023-09-08T13:51:47Z",
      "side": 1,
      "message": "For items that are part of a bundle this will set `iten.items_behind` to an empty list: https://opendev.org/zuul/zuul/src/branch/master/zuul/model.py#L1306-L1314\n\nAre we correctly canceling jobs in this case in the loop below?",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d365884_c67a5780",
        "filename": "zuul/manager/__init__.py",
        "patchSetId": 2
      },
      "lineNbr": 1761,
      "author": {
        "id": 1
      },
      "writtenOn": "2023-09-11T22:01:38Z",
      "side": 1,
      "message": "Nope.  Fixed.",
      "parentUuid": "fa2c0862_5f9137b5",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62dcb381_512183f9",
        "filename": "zuul/model.py",
        "patchSetId": 2
      },
      "lineNbr": 4921,
      "author": {
        "id": 27582
      },
      "writtenOn": "2023-09-08T13:37:25Z",
      "side": 1,
      "message": "nit: was this meant to be a property? Otherwise we might want to camel-case that method name.",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35356496_5ff3ba9a",
        "filename": "zuul/model.py",
        "patchSetId": 2
      },
      "lineNbr": 4921,
      "author": {
        "id": 1
      },
      "writtenOn": "2023-09-11T22:01:38Z",
      "side": 1,
      "message": "Indeed it was!",
      "parentUuid": "62dcb381_512183f9",
      "revId": "8d2c3e66def380f049508da589ef091fd401cf06",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}