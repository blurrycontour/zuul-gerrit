{
  "comments": [
    {
      "key": {
        "uuid": "9442ece0_94d6c277",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 51,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-03-12T23:13:08Z",
      "side": 1,
      "message": "I\u0027m not really seeing how this is used yet.",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d02d2370_48b72ee3",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 51,
      "author": {
        "id": 27582
      },
      "writtenOn": "2021-03-15T14:26:04Z",
      "side": 1,
      "message": "This is the information we set on the event when it\u0027s consumed from the queue in order to find it later on when the event is acked (see the ack() method implementation).",
      "parentUuid": "9442ece0_94d6c277",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b08bfc4b_eda33093",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 51,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-03-15T17:03:32Z",
      "side": 1,
      "message": "Okay, so it\u0027s a reference to the event for use when acking, not a reference to an \"event ack\".  I was expecting it to be the latter, and could not find an ack ref attribute on the serialized version of the event in the queue.  That\u0027s because it\u0027s an attribute that\u0027s added after the fact to the de-serialized object.\n\nI\u0027ll add some documentation about this.",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba5d2af0_4546ae2b",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 218,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-03-15T17:03:32Z",
      "side": 1,
      "message": "The merge method doesn\u0027t appear to update merged_events; we should make sure to test this case.",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ee214f0_c8a853e3",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 218,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-03-15T17:41:08Z",
      "side": 1,
      "message": "Ah, good, you added it in a later patchset.  I\u0027m guessing the test helped catch that.",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f768cf4_5c2dac41",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 218,
      "author": {
        "id": 27582
      },
      "writtenOn": "2021-03-16T06:44:12Z",
      "side": 1,
      "message": "It did ;)",
      "parentUuid": "7ee214f0_c8a853e3",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "64056be9_f8ff51a3",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 260,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-03-12T23:13:08Z",
      "side": 1,
      "message": "I don\u0027t know what the registry is.",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fa08d15_f0bb70fa",
        "filename": "zuul/zk/event_queues.py",
        "patchSetId": 30
      },
      "lineNbr": 260,
      "author": {
        "id": 27582
      },
      "writtenOn": "2021-03-15T14:26:04Z",
      "side": 1,
      "message": "Yes, I think this makes only sense when looking at how the event queues are used in the scheduler. Basically the registry allows accessing a tenants pipeline event queue as follows:\n\n    queue_registry \u003d PipelineManagementEventQueue.createRegistry(self.zk_client)\n    assert isinstance(\n        queue_registry[\"tenant_name\"][\"pipeline_name\"],\n        PipelineManagementEventQueue\n    )",
      "parentUuid": "64056be9_f8ff51a3",
      "revId": "0e637c56307da02a73b0bf2aa51ffc770a794de0",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}