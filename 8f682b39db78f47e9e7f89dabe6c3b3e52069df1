{
  "comments": [
    {
      "key": {
        "uuid": "a03fe73f_4d0f10bb",
        "filename": "doc/source/reference/drivers/gitlab.rst",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 6889
      },
      "writtenOn": "2021-01-26T12:15:12Z",
      "side": 1,
      "message": "I\u0027ve tested with a cloneurl set in the zuul.conf of form https://something:\u003capi_token\u003e@gitlab.com and it worked as expected. So I\u0027m not sure why we need this new setting.\n\nIf we go for the cloneurl solution maybe a new paragraph in this doc about how to deal with private repositories will be welcome.",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bafb0c8b_7aa2b4a0",
        "filename": "doc/source/reference/drivers/gitlab.rst",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 31905
      },
      "writtenOn": "2021-01-26T16:30:50Z",
      "side": 1,
      "message": "I was not used at all to Gitlab when I tried to use it with Zuul. I was completely overwhelmed by deploys keys, deploy token, personal access token, instance level, group level, project level, ... It took me some time to find how to allow Zuul to clone repositories for multiple projects with a single connection, using the cloneurl format you said.\n\nBut having to set server AND cloneurl with the same information felt wierd (duplicating information). So modifying cloneurl to include credentials if api_token_name is defined seemed reasonable to me.\n\nAs you said, at minimum a new paragraph for cloneurl to either:\n-explain that name/token will be included if defined (+ add more check in code to include credentials if \"a:b@\" cannot already be found in parameter)\n-OR to explain multiple cases with/without credentials\n\nIMO \"something\" should be the API token name as I describe in the other comment.",
      "parentUuid": "a03fe73f_4d0f10bb",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77a24795_8293fbbc",
        "filename": "doc/source/reference/drivers/gitlab.rst",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-01-29T22:07:06Z",
      "side": 1,
      "message": "I\u0027m normally pretty reluctant to add unecessary options, but the way Guillaume describes it, this seems more user friendly.  I like the idea of having clear instructions that say \"set these 4 values (api token name, api token, webhook token, server) and the rest can be ignored except in advanced cases.",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "294e7b94_4c5b7654",
        "filename": "doc/source/reference/drivers/gitlab.rst",
        "patchSetId": 3
      },
      "lineNbr": 66,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-01-29T22:07:06Z",
      "side": 1,
      "message": "spelling: authentication",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5e0b28b_b9d5d98a",
        "filename": "doc/source/reference/drivers/gitlab.rst",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1
      },
      "writtenOn": "2021-01-29T22:07:06Z",
      "side": 1,
      "message": "Should we say \"Omit\" instead of \"Leave blank\" to be clear?",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "953a49f8_e37ec780",
        "filename": "zuul/driver/gitlab/gitlabconnection.py",
        "patchSetId": 3
      },
      "lineNbr": 390,
      "author": {
        "id": 6889
      },
      "writtenOn": "2021-01-26T12:15:12Z",
      "side": 1,
      "message": "Why do we need this new attribute ? It seems the user could use the cloneurl to specify the auth.",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8bd66ad4_ca5ad4af",
        "filename": "zuul/driver/gitlab/gitlabconnection.py",
        "patchSetId": 3
      },
      "lineNbr": 390,
      "author": {
        "id": 31905
      },
      "writtenOn": "2021-01-26T16:30:50Z",
      "side": 1,
      "message": "Explained by \"To clone internal or private projects, authentication is required. It\ncan be achieved using the Access Token. Currently, any names can be used\nbut [1] shows that it\u0027s likely going to be restricted to username and\ntoken-name. As token-name is directly related to an Access Token, use\nthis value.\"\nand comment in \"def getGitUrl(\"",
      "parentUuid": "953a49f8_e37ec780",
      "revId": "8f682b39db78f47e9e7f89dabe6c3b3e52069df1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": true
    }
  ]
}