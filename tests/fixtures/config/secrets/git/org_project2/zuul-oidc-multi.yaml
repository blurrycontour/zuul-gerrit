- secret:
    name: project2_oidc_secret0
    oidc:
      ttl: 300
      algorithm: RS256
      claims:
        aud: sts.amazonaws.com
        my_claim: my_claim_value
        # Test it should not overwrite default claims
        sub: some_sub_value

- secret:
    name: project2_oidc_secret1
    oidc:
      ttl: 300
      algorithm: RS256
      claims:
        aud: sts.amazonaws.com
        my_claim: my_claim_value
        # Test it should not overwrite default claims
        sub: some_sub_value

- secret:
    name: project2_oidc_secret2
    oidc:
      ttl: 300
      algorithm: RS256
      claims:
        aud: sts.amazonaws.com
        my_claim: my_claim_value
        # Test it should not overwrite default claims
        sub: some_sub_value

- job:
    parent: base
    name: project2-oidc-secret
    run: playbooks/secret.yaml
    secrets:
      - project2_oidc_secret0
      - project2_oidc_secret1
      - project2_oidc_secret2

- project:
    check:
      jobs:
        - project2-oidc-secret
    gate:
      jobs:
        - noop
