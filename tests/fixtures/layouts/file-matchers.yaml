- pipeline:
    name: check
    manager: independent
    trigger:
      gerrit:
        - event: patchset-created
    success:
      gerrit:
        Verified: 1
    failure:
      gerrit:
        Verified: -1

- job:
    name: base
    parent: null
    run: playbooks/base.yaml

- job:
    name: parent-override-job
    files: parent1.txt

- job:
    name: parent-override-job
    files: parent2.txt

- job:
    name: child-job
    parent: parent-override-job

- job:
    name: child-override-job
    parent: parent-override-job
    files: child.txt

- job:
    name: project-override-job
    parent: parent-override-job

- job:
    name: irr-override-job
    parent: parent-override-job
    irrelevant-files:
      - parent1.txt  # make sure we have overriden parent files
      - README

- job:
    name: files-override-job
    parent: irr-override-job
    files: parent1.txt  # make sure we have overriden parent irr-files

- project:
    name: org/project
    check:
      jobs:
        - child-job  # parent2
        - child-override-job  # child
        - project-override-job:  # project
            files: project.txt
        - irr-override-job  # parent2, child, project
        - files-override-job  # parent1
