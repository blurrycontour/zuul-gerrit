{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bc2d38f0_ea9796a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-01-12T23:25:34Z",
      "side": 1,
      "message": "Left some thoughts. Note I didn\u0027t do a complete line for line review of the larger script, but read it for general understanding of how it works and it seems reasonable.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69baafbb_a360c3c8",
        "filename": "tools/zk-analyze.py",
        "patchSetId": 5
      },
      "lineNbr": 16,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-01-12T23:25:34Z",
      "side": 1,
      "message": "Any concerns around races when either dumping from zk or reading it directly from zk here? Looks like we iterate over shards and just mark them as failed if they don\u0027t exist which is probably good enough for most analysis.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d4c072a_95826a26",
        "filename": "tools/zk-analyze.py",
        "patchSetId": 5
      },
      "lineNbr": 16,
      "author": {
        "id": 27582
      },
      "writtenOn": "2022-01-13T13:01:56Z",
      "side": 1,
      "message": "It might be that the dump script is a little faster than the analyzer, but at least I did not encounter any issues when dumping our production ZK during peak hours.",
      "parentUuid": "69baafbb_a360c3c8",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dabb822d_a155f57c",
        "filename": "tools/zk-analyze.py",
        "patchSetId": 5
      },
      "lineNbr": 87,
      "author": {
        "id": 27582
      },
      "writtenOn": "2022-01-13T14:06:35Z",
      "side": 1,
      "message": "I think if we are using the ZK size option we should also limit matches by the ZK size.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90f230ac_d6717966",
        "filename": "tools/zk-analyze.py",
        "patchSetId": 5
      },
      "lineNbr": 215,
      "author": {
        "id": 27582
      },
      "writtenOn": "2022-01-13T12:59:49Z",
      "side": 1,
      "message": "Sorry to -1 this once more, but now that the data in ZK is compressed we need to open this file \u0027rb\u0027.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e96c371_b95258b5",
        "filename": "tools/zk-analyze.py",
        "patchSetId": 5
      },
      "lineNbr": 449,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-01-12T23:25:34Z",
      "side": 1,
      "message": "See comment on the dump script. I think this one will be a bit more clear if the other command is updated. But maybe consider noting this is in lieu of talking to Zk directly?",
      "range": {
        "startLine": 449,
        "startChar": 40,
        "endLine": 449,
        "endChar": 55
      },
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "296ac77c_255c0457",
        "filename": "tools/zk-analyze.py",
        "patchSetId": 5
      },
      "lineNbr": 449,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-01-25T14:52:28Z",
      "side": 1,
      "message": "Yep.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06fc6188_7c9e26a9",
        "filename": "tools/zk-dump.py",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-01-12T23:25:34Z",
      "side": 1,
      "message": "Any reason to not use os.path.join here and below with the recursive getTree call arg?",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dabf2291_b17ceb5e",
        "filename": "tools/zk-dump.py",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-01-25T14:52:28Z",
      "side": 1,
      "message": "That would work, but given the tight control of input values it\u0027s not necessary.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f285a2c7_aecfbe3e",
        "filename": "tools/zk-dump.py",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 27582
      },
      "writtenOn": "2022-01-21T09:50:41Z",
      "side": 1,
      "message": "We need to forward the decompress flag here.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22240531_4f605f1b",
        "filename": "tools/zk-dump.py",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-01-25T14:52:28Z",
      "side": 1,
      "message": "Done.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf69f847_267f3fb2",
        "filename": "tools/zk-dump.py",
        "patchSetId": 5
      },
      "lineNbr": 47,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-01-12T23:25:34Z",
      "side": 1,
      "message": "Nit this help text is a bit ambiguous. On my first read I read it was the path in ZK to dump. But rereading this is the path on the local disk to write the entire Zuul db to.",
      "range": {
        "startLine": 47,
        "startChar": 37,
        "endLine": 47,
        "endChar": 54
      },
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7dbf3c0_078f694e",
        "filename": "tools/zk-dump.py",
        "patchSetId": 5
      },
      "lineNbr": 47,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-01-25T14:52:28Z",
      "side": 1,
      "message": "Will reword.",
      "revId": "f590da92cb4f250916ddf6251dd466f902c2cb2b",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}