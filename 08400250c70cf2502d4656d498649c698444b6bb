{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b4de37e5_a92d8f8b",
        "filename": "web/src/api.js",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 9311
      },
      "writtenOn": "2023-07-06T13:02:01Z",
      "side": 1,
      "message": "This new implementation does not seems to work with sub-directory serving. I think we can replace the previous implementation by using the PUBLIC_URL env with:\n\n```\n   let path \u003d \u0027/\u0027                                                                                                                                                                                                                                                                                                                                                                           \n   if (process.env.PUBLIC_URL) {                                                                                                                                                                                                                                                                                                                                                            \n     path \u003d process.env.PUBLIC_URL                                                                                                                                                                                                                                                                                                                                                          \n   }                                                                                                                                                                                                                                                                                                                                                                                        \n   return baseUrl.origin + path  \n```\n\nThat seems to pass the proposed test in the other file. Though I\u0027m not sure this will work in the final bundled js. It should according to https://create-react-app.dev/docs/adding-custom-environment-variables/",
      "revId": "08400250c70cf2502d4656d498649c698444b6bb",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77891f70_e9b75248",
        "filename": "web/src/api.test.js",
        "patchSetId": 5
      },
      "lineNbr": 23,
      "author": {
        "id": 9311
      },
      "writtenOn": "2023-07-06T13:02:01Z",
      "side": 1,
      "message": "I don\u0027t think the getHomepageUrl method is used for api url.",
      "revId": "08400250c70cf2502d4656d498649c698444b6bb",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08202a0f_5487b704",
        "filename": "web/src/api.test.js",
        "patchSetId": 5
      },
      "lineNbr": 34,
      "author": {
        "id": 9311
      },
      "writtenOn": "2023-07-06T13:02:01Z",
      "side": 1,
      "message": "I think we need to make this test pass:\n\n```\n it(\u0027should return the subdir homepage url\u0027, () â‡’ {                                                                                                                                                                                                                                                                                                                                  \n   const homepage \u003d \u0027https://example.com/zuul/\u0027                                                                                                                                                                                                                                                                                                                                             \n   Object.defineProperty(window, \u0027location\u0027, {                                                                                                                                                                                                                                                                                                                                              \n     value: new URL(homepage)                                                                                                                                                                                                                                                                                                                                                               \n   } )                                                                                                                                                                                                                                                                                                                                                                                      \n   Object.defineProperty(process.env, \u0027PUBLIC_URL\u0027, {                                                                                                                                                                                                                                                                                                                                       \n     value: \"/zuul/\"                                                                                                                                                                                                                                                                                                                                                                        \n   } )   \n                                                                                                                                                                                                                                                                                                                                                                                               \n   // Test some of the known, possible, URLs to verify                                                                                                                                                                                                                                                                                                                                      \n   // that the origin is returned.                                                                                                                                                                                                                                                                                                                                                          \n   const urls \u003d [                                                                                                                                                                                                                                                                                                                                                                           \n       // auth_callback test  as some providers build                                                                                                                                                                                                                                                                                                                                       \n       // different callback urls                                                                                                                                                                                                                                                                                                                                                           \n       \u0027https://example.com/zuul/auth_callback\u0027,                                                                                                                                                                                                                                                                                                                                            \n       \u0027https://example.com/zuul/auth_callback#state\u003d12345\u0027,                                                                                                                                                                                                                                                                                                                                \n                                                                                                                                                                                                                                                                                                                                                                                            \n       // Regular browser navigation urls                                                                                                                                                                                                                                                                                                                                                   \n       \u0027https://example.com/zuul/status\u0027,                                                                                                                                                                                                                                                                                                                                                   \n       \u0027https://example.com/zuul/t/zuul-tenant/status\u0027,                                                                                                                                                                                                                                                                                                                                     \n       \u0027https://example.com/zuul/t/zuul-tenant/jobs\u0027,                                                                                                                                                                                                                                                                                                                                       \n   ]                                                                                                                                                                                                                                                                                                                                                                                        \n                                                                                                                                                                                                                                                                                                                                                                                            \n   for (let url of urls) {                                                                                                                                                                                                                                                                                                                                                                  \n     window.location.href \u003d url                                                                                                                                                                                                                                                                                                                                                             \n     expect(getHomepageUrl()).toEqual(homepage)                                                                                                                                                                                                                                                                                                                                             \n   }                                                                                                                                                                                                                                                                                                                                                                                        \n })\n```",
      "revId": "08400250c70cf2502d4656d498649c698444b6bb",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}