{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4d520ed1_7b24d986",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 27582
      },
      "writtenOn": "2024-06-12T10:37:22Z",
      "side": 1,
      "message": "I\u0027m not quite sure I understand the impact this has on the scheduler run handler. Are we moving more i/o back into the run handler of the schedulers? Since the query cache is local to the schedulers, what\u0027s the impact when running with a few more (10+) scheduler instances?",
      "revId": "81fe0a50d1259e6b5d3f7a9c234e1a90798adbb3",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1a4fbf97_7f991289",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-06-12T14:29:48Z",
      "side": 1,
      "message": "The query cache only lives for a few seconds -- it basically just ensures that we avoid repeating queries for a chunk of related changes in a pipeline.  So it should behave the same regardless of the number of executors.  In other words, since we don\u0027t keep the cache across pipeline runs, there\u0027s no opportunity for a single scheduler to benefit from a long cache time.\n\nAnd yes, this does move some queries from the driver event handler into the pipeline run handler.  It has generally been a goal to do most of the dependency handling inside the pipeline handler.  That moves complexity out of the drivers and into something that is shared.  It also means that we can avoid bottlenecks in the event handling; currently a group of changes can delay events for the entire system.  With this change, they might only delay a single pipeline.\n\nIt might be the case that if the same group of changes was added to multiple pipelines, then multiple schedulers would end up running the same queries.  I\u0027m not sure about that, I\u0027ll look into it.",
      "parentUuid": "4d520ed1_7b24d986",
      "revId": "81fe0a50d1259e6b5d3f7a9c234e1a90798adbb3",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}