- block:
    - name: Install git-review
      package:
        name:
          - git-review
          # This should only be needed with the podman backend
          - catatonit
        state: present
      become: true
    - name: Start buildx builder
      # This may not be necessary under a normal docker install
      # https://github.com/docker/buildx/issues/344
      shell: |
        echo "FROM scratch" | docker buildx build - || true
      environment:
        DOCKER_HOST: unix:///run/podman/podman.sock
      become: true
  when: not local

- name: Setup Tutorial Execution
  include_role:
    name: setup-tutorial

- name: Run quick-start tutorial
  include_tasks: quick-start.yaml

- name: Run admin tutorial
  include_tasks: admin.yaml

- name: Run tracing tutorial
  include_tasks: tracing.yaml
