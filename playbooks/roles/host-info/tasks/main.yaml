- name: Display zuul info.
  shell: |
    echo "Executed from ..."
    echo "Building remotely on {{ nodepool_provider }} in workspace {{ zuul_workspace_root }}"
    echo "Project: {{ zuul.project }}"
    echo "Job: {{ zuul.job }}"
    echo "Pipeline: {{ zuul.pipeline }}"

- name: Display net-info.
  shell: |
    export PATH=$PATH:/sbin
    if [ -f /etc/dib-builddate.txt ]; then
        echo "Image build date"
        echo "================"
        cat /etc/dib-builddate.txt
    fi
    echo "Host & kernel"
    echo "============="
    uname -a
    echo "Network interface addresses..."
    echo "=============================="
    ip address show
    echo "Network routing tables..."
    echo "========================="
    ip route show
    ip -6 route show
    echo "Network neighbors..."
    echo "===================="
    ip neighbor show
    echo "Route to Git mirror..."
    echo "======================"
    traceroute6 -n git.openstack.org \
        || traceroute -n git.openstack.org \
        || true
